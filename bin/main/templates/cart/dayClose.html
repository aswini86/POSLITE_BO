<!DOCTYPE html>
<html lang="en">
<html th:replace="~{layout :: template(~{::title}, ~{::section}, 'Pos Transaction')}" xmlns:th="http://www.thymeleaf.org">
<!-- Pos Cart -->

<head>
<title>Retail BO :: Pos Daily Transaction</title>
</head>
<body>
	<section class="main-section" id="wrapper">
		<!-- --- header starts --- -->
		
		<div class="clear"></div>

		<!-- --- header ends ----- -->
		<div class="clear"></div>

		<section class="billing content-section">
		<!-- ---------------search starts here----------- -->
		<div class="search-container">




			<div class="row margin1">
                <div class="col-md-8">
                    <div class="col-md-6">

                    <fieldset  align="center">
                        <label class="search-labels col-lg-4 col-md-4 col-sm-4 col-xs-12">Receipt Date</label>
                        <input id="Receiptdate" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-12"
                          align="right" type="text" th:value="${dayDetailList.get('day')}" readonly/>
                    </fieldset>
                       <fieldset align="center">
                        <label class="search-labels col-lg-4 col-md-4 col-sm-4 col-xs-12">Reciept Id</label> 
                       <input id="Receiptid" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-12" 
                       align="right" type="text" th:value="${dayDetailList.get('receiptId')}" name="receiptId" placeholder="" readonly> 
                    </fieldset>
                    </div>
                     <div class="col-md-6">
                    <fieldset align="center">
                        <label class="search-labels col-lg-4 col-md-4 col-sm-4 col-xs-12">Terminal Name</label> 
                        <input id="terminalId" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-12"
                        align="right" type="text" th:value="${dayDetailList.get('terminalId')}" name="terminalId" placeholder="">
                    </fieldset>
                    <fieldset align="center">
                        <label class="search-labels col-lg-4 col-md-4 col-sm-4 col-xs-12" >Day Id</label>
                        <input id="Dayid" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-12" align="right" type="text" 
                        th:value="${dayDetailList.get('dayId')}" placeholder="" />
                    </fieldset>
                    </div>
                    
                    <div class="col-md-6">
                    	<fieldset align="center">
                        <label class="search-labels col-lg-4 col-md-4 col-sm-4 col-xs-12">Day</label> 
                        <select class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-12" id="daystatus">
                            <option>Reciept Type</option>
                            <option th:value="CLOSED">Closed Day</option>
                        </select> 
                    	</fieldset>
                    </div>
			</div>
		</div>
	</div>
		
		<!-- ---------------search ends here----------- -->	
	  <div class="col-md-6 col-sm-10 col-xs-10 table-container">
	  <table id="pos_cart" class="row-border order-column"
		style="width: 100%" "height:20px">
		<thead style="background:#1F1F1F;color:#fff;">
			<tr>
				<th>Payment Mode</th>
				<th>Total Amount</th>
			</tr>
		</thead>
		<tbody>
			
	  <tr>    
			   <td>Cash</td>
               <td><input  onkeyup="calculateDayDetails()" id="entercash" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-12"  
               align="right" type="text" placeholder="Enter Total Cash" /></td>
                   
      </tr>
      
     
       
     </tbody>
	</table>
	
<!-- <button class="btn-theme btn-black" style="height:36px" align ="right">Save & create new </button>
		
<button class="btn-theme btn-black" style="height:36px" >Save & close</button>-->


</div> 

	  <input type="hidden" id="createdBy" name="createdBy" th:value="${session.username}">
	  <div class="col-md-6 col-sm-50 col-xs-50 table-container">
	  <table id="pos_cart" class="row-border order-column"
		style="width: 100%; height:20px"> 
		<thead style="background:#1F1F1F;color:#fff;">
			<tr>
				<th>Denome Rate</th>
				<th>Count</th>
				<th>Amount</th>
			</tr>
		</thead>
		<tbody>
	  
	  <tr>    
			   <td> <label>2000</label></td>
               <td><input id="2000" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" th:value="${dayDetailList.get('openingDayCount2000')}" type="text" style="background-color:silver;" placeholder="0 " onkeyup="calculateDayDetails()"/></td>
               
               <td><input style =  "border: none;border-color: transparent;    background: transparent;
               " type="text"  class="center" value="0" id="total2000" placeholder="Total" readonly/></td>
      </tr>
      

      
       	  <tr>    
			   <td><label>500</label></td>
			   
               <td><input onkeyup="calculateDayDetails()" id="500" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount500')}" style="background-color:silver;" placeholder="0"/></td>
               
                <td><input style =  "border: none;border-color: transparent;   background: transparent;
               " type="text" class="center"  value="0" id="total500" placeholder="Total" readonly/></td>            
      </tr>
      <tr>    
			   <td><label>200</label></td>
			   
               <td><input onkeyup="calculateDayDetails()" id="200" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount200')}" style="background-color:silver;" placeholder="0"/></td>
               
                <td><input style =  "border: none;border-color: transparent;   background: transparent;
               " type="text" class="center"  value="0" id="total200" placeholder="Total" readonly/></td>            
      </tr>
       <tr>    
			   <td><label>100</label></td>
			   
               <td><input onkeyup="calculateDayDetails()" id ="100" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount100')}" style="background-color:silver;" placeholder="0"/></td>
               
                <td><input style ="border: none; border-color: transparent; background: transparent;
               " type="text" class="center" value="0" id="total100" placeholder="Total" readonly/></td>               
      </tr>
      <tr>    
			   <td><label>50</label></td>
			
                <td><input onkeyup="calculateDayDetails()" id ="50" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount50')}"  style="background-color:silver;" placeholder="0"/></td>
                
               <td><input style =  "border: none;border-color: transparent;    background: transparent;
               " type="text" class="center"  value="0" id="total50" placeholder="Total" readonly/></td>              
      </tr>
       <tr>    
			   <td><label>20</label></td>
			   
               <td><input onkeyup="calculateDayDetails()" id ="20" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount20')}" style="background-color:silver;" placeholder="0"/></td>
               
               <td><input style =  "border: none;border-color: transparent;    background: transparent;
                " type="text" class="center" value="0"  id="total20" placeholder="Total" readonly/></td>             
      </tr>
       <tr>    
			   <td><label>10</label></td>
			   
               <td><input onkeyup="calculateDayDetails()"  id ="10" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount10')}" style="background-color:silver;" placeholder="0" /></td>
                
                <td><input style =  "border: none;border-color: transparent;    background: transparent;
               " type="text" class="center" value="0" id="total10" placeholder="Total" readonly/></td>              
      </tr>
      <tr>    
			   <td><label>5</label></td>
			   
               <td><input onkeyup="calculateDayDetails()"  id ="5" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount5')}" style="background-color:silver;" placeholder="0" /></td>
                
                <td><input style =  "border: none;border-color: transparent;    background: transparent;
               " type="text" class="center" value="0" id="total5" placeholder="Total" readonly/></td>              
      </tr>
      <tr>    
			   <td><label>2</label></td>
			   
               <td><input onkeyup="calculateDayDetails()"  id ="2" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount2')}" style="background-color:silver;" placeholder="0" /></td>
                
                <td><input style =  "border: none;border-color: transparent;    background: transparent;
               " type="text" class="center" value="0" id="total2" placeholder="Total" readonly/></td>              
      </tr>
      <tr>    
			   <td><label>1</label></td>
			   
               <td><input onkeyup="calculateDayDetails()"  id ="1" class="search-inputs col-lg-8 col-md-8 col-sm-8 col-xs-10"  
               align="right" type="number" th:value="${dayDetailList.get('openingDayCount1')}" style="background-color:silver;" placeholder="0" /></td>
                
                <td><input style =  "border: none;border-color: transparent;    background: transparent;
               " type="text" class="center" value="0" id="total1" placeholder="Total" readonly/></td>              
      </tr>
		</tbody>
	</table>
	
	

	
	 <label class="search-labels col-lg-4 col-md-4 col-sm-4 col-xs-12" style="margin-left: 40%;">Total Amount</label>
	
	
    
     <input   style = "margin-left:-7.5%; border: none;border-color: transparent;  background: transparent;" 
     type="text" onkeyup="calculateDayDetails()" class="center" id="total" placeholder="0"/>
	
	

	<div class="col-md-12">
          


 <button  class="btn-theme btn-green" data-toggle="modal"
                 data-target="" style="height: 38px;padding: 0 4%;margin-left: 60%;">
                   <a th:href="@{/poslogin}"> 
                   <i></i> Cancel </a>
                </button>

   <input type="submit" id="dayClose" onclick="calculateDayDetails()" class="btn-theme btn-green" modal style="height: 38px;padding: 0 4%;" value="Submit"/>
   </div>
	<!-- Confirm Model Starts Here -->
            <div id="confirmationModal" class="modal fade" role="dialog">
                <div class="modal-dialog" style="margin-top: 15%;width: 400px !important;">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-body text-center">
                            <b id="msgtext"></b>
                            <div class="confirmation-btn-div">
                            <button type="button" data-dismiss="modal" class="btn-theme btn-go" id="redirect">Ok</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Confirm Model End Here -->
	 
	  <!-- Already Exists Model Starts Here -->
            <div id="alreadyExistModal" class="modal fade" role="dialog">
                <div class="modal-dialog" style="margin-top: 15%;width: 400px !important;">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-body text-center">
                            <b id="qmsgtext"></b>
                            <div class="confirmation-btn-div">
                                <button type="button" data-dismiss="modal" class="btn-theme btn-go">Ok</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Already Exists Model End Here -->
	
     <!-- code for current date  -->
<script>
function mydate() {
/* document.getElementById('Receiptdate').value= Date(); */
var dt = new Date();
document.getElementById("Receiptdate").value = (dt.getFullYear()) +"-"+ (("0"+(dt.getMonth()+1)).slice(-2)) +"-"+ 
(("0"+dt.getDate()).slice(-2));

}
</script>
	


<!-- code for receipt  id -->
<script>
function myreceiptid() {
  var d = new Date();
  var n = d.getTime();
  document.getElementById("Receiptid").value = n;
}
</script>
	
	
		 <!-- code for calculation  id -->


	<script>
	 $(document).ready(function(){
		var val2000 = document.getElementById("2000").value;
		var val500 = document.getElementById("500").value;
		var val200 = document.getElementById("200").value;
		var val100 = document.getElementById("100").value;
		var val50 = document.getElementById("50").value;
		var val20 = document.getElementById("20").value;
		var val10 = document.getElementById("10").value;
		var val5 = document.getElementById("5").value;
		var val2 = document.getElementById("2").value;
		var val1 = document.getElementById("1").value;
		
		$('#total2000').val(parseFloat(2000*val2000));
		$('#total500').val(parseFloat(500*val500));
		$('#total200').val(parseFloat(200*val200));
		$('#total100').val(parseFloat(100*val100));
		$('#total50').val(parseFloat(50*val100));
		$('#total20').val(parseFloat(20*val100));
		$('#total10').val(parseFloat(10*val100));
		$('#total5').val(parseFloat(5*val100));
		$('#total2').val(parseFloat(2*val100));
		$('#total1').val(parseFloat(1*val100));
		
		var total = parseFloat(2000*val2000)+parseFloat(500*val500)+parseFloat(200*val200)+parseFloat(100*val100)+parseFloat(50*val50)
					+parseFloat(20*val20)+parseFloat(10*val10)+parseFloat(5*val5)+parseFloat(2*val2)+
					parseFloat(1*val1);
		
		$('#entercash').val(total);
		$('#total').val(total);
	 });
        function calculateDayDetails() {
            var a = document.getElementById("2000").value;
            
            var result1 = parseInt(a) * 2000;
            
            var textcontrol =    document.getElementById("total2000");
            
            if (!isNaN(result1)) {
            	
            	 textcontrol.value = result1;
            }
           
            var b = document.getElementById("500").value;

            var result2 = parseInt(b) * 500;
            
            var textcontrol = document.getElementById("total500");
            
            
            if (!isNaN(result2)) {
            	
                textcontrol.value = result2;
            }
            
            var c = document.getElementById("200").value;

            var result200 = parseInt(c) * 200;
            
            var textcontrol = document.getElementById("total200");
            
            
            if (!isNaN(result200)) {
            	
                textcontrol.value = result200;
            }
            
            
            var d = document.getElementById("100").value;

            var result3 = parseInt(d) * 100;
            
            var textcontrol =    document.getElementById("total100");
            
            
            if (!isNaN(result3)) {
            	
                textcontrol.value = result3;
            }            
            
            
            
            var e = document.getElementById("50").value;

            var result4 = parseInt(e) * 50;
            
            var textcontrol =    document.getElementById("total50");
            
            
            if (!isNaN(result4)) {
            	
                textcontrol.value = result4;
            }
            
            
            
            var f = document.getElementById("20").value;

            var result5 = parseInt(f) * 20;
            
            var textcontrol =    document.getElementById("total20");
            
            
            if (!isNaN(result5)) {
            	
                textcontrol.value = result5;
            }            
            
            var g = document.getElementById("10").value;

            var result6 = parseInt(g) * 10;
            
            var textcontrol =    document.getElementById("total10");
            
            if (!isNaN(result1)) {
            	
                textcontrol.value = result6;
            } 
            
            var h = document.getElementById("5").value;

            var result_5 = parseInt(h) * 5;
            
            var textcontrol = document.getElementById("total5");
            
            if (!isNaN(result_5)) {
            	
                textcontrol.value = result_5;
            } 
            
            var i = document.getElementById("2").value;

            var result_2 = parseInt(i) * 2;
            
            var textcontrol = document.getElementById("total2");
            
            if (!isNaN(result_2)) {
            	
                textcontrol.value = result_2;
            }
            
            var j = document.getElementById("1").value;

            var result_1 = parseInt(j) * 1;
            
            var textcontrol = document.getElementById("total1");
            
            if (!isNaN(result_1)) {
            	
                textcontrol.value = result_1;
            }

            var totaldata = result1+result2+result200+result3+result4+result5+result6+result_5+result_2+result_1;
            
            var textcontrol = document.getElementById("total");
            
            textcontrol.value = totaldata;
       
            var entercash = document.getElementById("entercash").value; 
            
            if(entercash != totaldata){
        		$('#confirmationModal').modal('toggle');
        		$("#msgtext").append("Entered Cash and Total Amount is not matching!");
        	}  else {
                	var createdBy = $('#createdBy').val();
            		var dayId = $('#Dayid').val();
            		var terminalId = $('#terminalId').val();
            		var receiptId = $('#Receiptid').val();
            		var dayStatus = $('#daystatus').val();
            		
            		var val_2000 = $('#2000').val();
            		var val_500 = $('#500').val();
            		var val_200 = $('#200').val();
            		var val_100 = $('#100').val();
            		var val_50 = $('#50').val();
            		var val_20 = $('#20').val();
            		var val_10 = $('#10').val();
            		var val_5 = $('#5').val();
            		var val_2 = $('#2').val();
            		var val_1 = $('#1').val();
            		
            		var data0 = {
            			dayId : dayId,
            			dayStatus : dayStatus,
           				androidDeviceId : "WEB",
           				androidDeviceVersion : "WEB",
           				androidAPKVersion : "WEB",
    				};
            		var json = JSON.stringify(data0);
            		
            		$.ajax({
    					type : 'GET',
    					url : '/updateDay',
    					data : {
    						json : json,
    						password : "ofbiz",
    						username : createdBy,
    					},
    					dataType : 'json',
    					success : function(data) {
    						if (data != "" && data != null) {
    							$('#confirmationModal').modal('toggle');
    							$("#msgtext").append(data);
    						}
    					}
    				});
            		$('#redirect').click(
    					function() {
    						var homeUrl = '/adminapproval';
    						window.location = homeUrl;
    				});
        	}
        }
        $(document).ready(function(){
        	var entercash = document.getElementById("entercash").value; 
        	
	    });
           
        </script>

    
	
		<!-- --- Add customer modal ends here --- -->
		<!-- -------Add to stock modal starts here---------- -->
	 <div id="selectArticle" class="modal fade" role="dialog">
		<div class="modal-dialog">

			Modal content
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h1 class="modal-title">Select Article</h1>
				</div>
				<div class="modal-body">
					<div class="search-div">
				<form class="" action="">
					<i class="fa fa-search"></i> <input type="text"
						placeholder="Scanned EAN Number" name="search">

				</form>
			</div> 
	 
		 <tbody>
			<tr th:each="productListEach,iter : ${productsList}" class="result">
				<td id="eanCode" th:text="${productListEach.get('productIdEan')}"></td>
				<td id="productId" th:text="${productListEach.get('productId')}"></td>
				<td name="unit_id">EA</td>
				<td id="productName" th:text="${productListEach.get('description')}"></td>
				<td id="lotId"></td>
				<td id="moOfPacks"></td>
				<td id="packSize"></td>
				<td></td>
				<td id="saleRate" th:text="${productListEach.get('productSalePrice')}"></td>
				<td id="coBatchNo"></td>
	 			<td id="expiryDate" th:text="${productListEach.get('salesDiscontinuationDate')}"></td>
	            <td><button class="check_val" data-toggle="modal" data-target="#cartmodal" th:onclick="addProductFunction([[${productListEach.get('productId')}]])"><i class="fa fa-plus-square"></i></button></td> 
	          
	        
			</tr>
		</tbody>  
	</table>
	  </div>
	      	
		</div>
	</div>
	
	
</body>
</html>